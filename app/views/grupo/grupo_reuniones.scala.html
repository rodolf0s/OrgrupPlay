@(usuario: Usuario, grupo: SqlRow, grupos: List[SqlRow], integrantes: List[Integrante], contactos: List[Contacto], reuniones: List[Reunion], archivos: List[Archivo])

@app(title = grupo.getString("nombre"), usuario.nombre) {

	<script type="text/javascript">
		$(document).ready(function() {
			$("[rel=tooltip]").tooltip();
			$("[rel=popover]").popover({
				trigger: 'focus',
				animate: false
			});
			
			@if(!archivos.isEmpty()) {
				$('#document').modal('show');
			}
		});
		
		function modalMiembros() {
			$('#agregaIntegrantes').modal('show');
		}
		function modalGrupos() {
			$('#creaGrupo').modal('show');
		}
		function modalDocumentos() {
			$('#document').modal('show');
		}
		function enviarReunion() {
			document.reunion.submit();
		}
		
	</script>

	<div class="row-fluid">
		<div class="span3">
			
			<div class="well well-small">
				<ul class="nav nav-list">
					<li> <img class="img-polaroid" style="width: 90px; height: 90px;" src="/assets/images/usuarios/@usuario.imagen" alt="imagen usuario"> </li>
					<li><b>@usuario.nombre</b></li>					
				</ul>
			</div>

			<div class="well well-small"> 
   				<form name="muestraGrupo">
	   				<ul class="nav nav-pills nav-stacked">
	   					<li class="nav-header">
	   						Grupos				
	   					</li>
	   					@if(!grupos.isEmpty()) {
		   					@for(g <- grupos) {		   						
			   					<li @if(grupo.getString("id") == g.getString("id")) { class="active" })>
			   						<a href='@routes.Grupos.index(g.getString("id").toLong)'>
			   							<img class="img-polaroid" style="width: 32px; height: 32px;" src='/assets/grupos/@g.getString("imagen")' alt="imagen grupo">
			   							@g.getString("nombre")
			   						</a>
			   					</li>		   						
		   					}
	   					}
	   				</ul>
   				</form>
   				<a href="#" role="button" class="btn btn-mini" data-toggle="modal"onClick=modalGrupos() >crear grupo</a>
   			</div>

<!--    			<div class="well well-small"> -->
<!--    				<ul class="nav nav-pills nav-stacked"> -->
<!--    					<li class="nav-header">Miembros</li> -->
<!--    				</ul> -->
<!--    				<ul class="unstyled"> -->
   					
<!-- 	   				@if(!integrantes.isEmpty()) { -->
<!-- 	   					@for(a <- integrantes) { -->
<!-- 	   						<li> -->
<!-- 		   						@if(a.tipo == 1) { -->
<!-- 		   							<img class="img-polaroid" style="width: 32px; height: 32px;" src="/assets/images/usuarios/@Usuario.getImagen(a.usuario.correo)" alt="imagen usuario"> -->
<!-- 		   							@Usuario.getNombre(a.usuario.correo) (Administrador) -->
<!-- 		   						} -->
<!-- 	   						</li> -->
<!-- 	   					} -->
	   				
<!-- 	   					@for(i <- integrantes) { -->
<!-- 	   						@if(i.tipo != 1) { -->
<!-- 		   						<li> -->
<!-- 		   							<img class="img-polaroid" style="width: 32px; height: 32px;" src="/assets/images/usuarios/@Usuario.getImagen(i.usuario.correo)" alt="imagen usuario"> -->
<!-- 		   							@Usuario.getNombre(i.usuario.correo)	 -->
<!-- 		   						</li> -->
<!-- 	   						} -->
<!-- 	   					} -->
<!-- 	   				} -->
<!--    				</ul> -->
<!--    				<a href="#" role="button" class="btn btn-mini" data-toggle="modal" onClick=modalMiembros() >agregar miembros</a> -->
<!--    			</div> -->

<!-- 			<div class="well sidebar-nav"> -->
<!-- 				@grupo.getString("nombre")<br> -->
<!-- 				@grupo.getString("usuario_correo")<br> -->
<!-- 				@grupo.getString("tipo")<br> -->
<!-- 				id @grupo.getString("id")<br> -->
<!-- 				@grupo.getString("distintivo")<br><br> -->
<!-- 			</div> -->
			
		</div>
		
		<div class="span7">
			<div class="page-header">
				<form action="#" method="post">
					<h1>				
						@grupo.getString("nombre") <small> Reuniones </small>				
						<input type="hidden" name="id" value='@grupo.getString("id")'>
						<input class="btn btn-success pull-right" type="submit" value="Crear reunion">					
					</h1>
				</form> 
			</div>
			
<!-- 				@if(!reuniones.isEmpty()) { -->
<!-- 					@for(r <- reuniones) { -->
<!-- 						<div class="well"> -->
<!-- 							<p><h4>@r.nombre</h4></p> -->
<!-- 						</div> -->
<!-- 					} -->
<!-- 				} -->
				<div>
					@if(!reuniones.isEmpty()) {
						<table class="table table-hover">
							<thead>
								<tr>
									<th>Nombre</th>
									<th>Fecha inicio</th>
									<th>Fecha fin</th>
									<th>Hora inicio</th>
									<th>Hora fin</th>
									<th>Descripcion</th>
									<th>Documentos</th>
								</tr>
							</thead>
							
							<tbody>
								@for(r <- reuniones) { 
								<form name="reunion" action="@routes.Grupos.getArchivo(r.grupo.id)" method="post">
									<tr>
										<td> 
											<input type="hidden" name="id" value="@r.id">
											<input type="hidden" name="grupo.id" value="@r.grupo.id">
											<a href="#" rel="tooltip" title="@r.nombre" data-content="@r.nombre" data-placement="top">
												@if(r.nombre.length < 11) {@r.nombre} else {@r.nombre.substring(0, 10)...}
											</a>
										</td>
										<td>@r.fecha_inico.format("dd/MM/yyyy")</td>
										<td>@r.fecha_fin.format("dd/MM/yyyy")</td>
										<td>@r.hora_inicio.format("HH:mm")</td>
										<td>@r.hora_fin.format("HH:mm")</td>
										<td>
											<a href="#" rel="tooltip" title="@r.descripcion" data-content="@r.nombre" data-placement="top">
												@if(r.descripcion.length < 25) {@r.descripcion} else {@r.descripcion.substring(0, 24)...}
											</a>
										</td>
										<td>
											<button type="submit" rel="tooltip" title="Ver documentos"><i class="icon-eye-open"></i></button>
<!-- 												<a href="#" rel="tooltip" title="Ver documentos" onClick=enviarReunion()><i class="icon-eye-open"></i></a> -->
										</td>									
									</tr>
								</form>
								}
							</tbody>
						</table>
					}
				</div>			
		</div>

		<div class="span2">
			<div class="tabbable tabs-right">
			<ul class="nav nav-tabs">
<!--				<li class="active"><a href="#">@grupo.getString("nombre")</a></li> -->
				<li class="active"><a href='@routes.Grupos.muestraReuniones(grupo.getString("id").toLong)'>Reuniones</a></li>
				<li><a href='@routes.Grupos.muestraDocumentos(grupo.getString("id").toLong)'>Documentos</a></li>
				<li><a href='@routes.Grupos.muestraMiembros(grupo.getString("id").toLong)'>Miembros</a></li>
				<li><a href='@routes.Grupos.muestraPreferencias(grupo.getString("id").toLong)'>Preferencias</a></li>
			</ul>
			</div>
		</div>
		
<!-- 		<div class="span3"> -->
<!-- 			<ul class="nav nav-tabs nav-stacked"> -->
<!-- 				<li class="active"><a href="#">@grupo.getString("nombre")</a></li> -->
<!-- 				<li><a href='@routes.Grupos.muestraReuniones(grupo.getString("id").toLong)'>Reuniones</a></li> -->
<!-- 				<li><a href='@routes.Grupos.muestraDocumentos(grupo.getString("id").toLong)'>Documentos</a></li> -->
<!-- 				<li><a href='@routes.Grupos.muestraMiembros(grupo.getString("id").toLong)'>Miembros</a></li> -->
<!-- 				<li><a href='@routes.Grupos.muestraPreferencias(grupo.getString("id").toLong)'>Preferencias</a></li> -->
<!-- 			</ul> -->
<!-- 		</div> -->
	</div>
	
	
	<!-- Modal agrega miembros -->
	<div class="modal hide fade" id="agregaIntegrantes">
		<form action="@routes.Grupos.agregaIntegrante" class="form-horizontal" name="integrante" method="post">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3>Agregar Miembros</h3>
			</div>
			<div class="modal-body">
				<div class="control-group">
	    			<label class="control-label">Nombre del miembro</label>
	    			<div class="controls">


						<!-- 
						Esta enviando solo el nombre del usuario, en el controlador
						hace una consulta para obtener el correo del usuario.
						
						Importante. solo sirve si el nombre es unico,	
						 -->
	    				<input type="text" id="search" data-provide="typeahead" data-items="4" autocomplete="off" name="usuario.correo">
	    			</div>
	    		</div>
	    		<script type="text/javascript">
		    		var contactos = [
		 							@if(!contactos.isEmpty()) {
		 								@for(c <- contactos) {
		 									'@Usuario.getNombre(c.usuario2.correo)',																	
		 								}
		 							}
		 						];
		 			$('#search').typeahead({
		 				source: contactos
		 			});
	    		</script>
	    		<input type="hidden" name="grupo.id" value='@grupo.getString("id")'>
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">Cerrar</a>
				<input type="submit" class="btn btn-primary" value="Agregar">
			</div>
		</form>		
	</div>
	
	<!-- Modal crear grupo -->
	<div class="modal hide fade" id="creaGrupo">
		<form action="@routes.Grupos.crearGrupo"class="form-horizontal" name="grupo" enctype="multipart/form-data" method="post">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3>Grupo Nuevo</h3>
			</div>
			<div class="modal-body">
				<div class="control-group">
	    			<label class="control-label">Nombre del grupo</label>
	    			<div class="controls">
	    				<input class="input-medium" type="text" name="nombre" required>
	    			</div>
	    		</div>
	    		
	    		<div class="control-group">
	    			<label class="control-label">Descripcion</label>
	    			<div class="controls">
	    				<textarea class="input-xlarge span3" name="descripcion" maxlength="500"></textarea>
	    			</div>
	    		</div>
	    		
	    		<div class="control-group">
				<label class="control-label" for="imagen">Imagen de grupo</label>
					<div class="controls">
						<img style="width: 90px; height: 90px;" src="/assets/grupos/group.png" alt="imagen grupo">
						<input class="input-file" id="imagen" type="file" name="imagen"><br>
						tama√±o maximo = 1 MB
					</div>
				</div>
				<input type="hidden" value='@grupo.getString("id")' name="grupoId">
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">Cerrar</a>
				<input type="submit" class="btn btn-primary" value="Crear">
			</div>
		</form>	
	</div>
	
	<!-- Modal documentos -->
	<div class="modal hide fade" id="document">
		<form action="#"class="form-horizontal" name="documentos" enctype="multipart/form-data" method="post">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h3>Documentos</h3>
			</div>
			<div class="modal-body">
				@if(!archivos.isEmpty()) {
					<table class="table table-hover">
						<thead>
							<tr>
								<th>Nombre</th>
								<th>Fecha</th>
								<th>Autor</th>
								<th>Descargar</th>
							</tr>
						</thead>
						<tbody>
							@for(ar <- archivos) {
								<tr>
									<td>@ar.nombre</td>
									<td>@ar.fecha.format("dd/MM/yyyy") @ar.hora.format("HH:mm")</td>
									<td>@Usuario.getNombre(ar.usuario.correo)</td>
									<td>bajar</td>
								</tr>
							}
						</tbody>
					</table>
				}
			</div>
			<div class="modal-footer">
				<a href="#" class="btn" data-dismiss="modal">Cerrar</a>
				<input type="submit" class="btn btn-primary" value="Crear">
			</div>
		</form>	
	</div>
}